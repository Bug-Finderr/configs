# Path prepends for faster startup
export NVM_DIR="$HOME/.nvm"
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$HOME/.antigravity/antigravity/bin:$HOME/Library/Python/3.9/bin:$HOME/.console-ninja/.bin:$HOME/Dev/configs/mac:$HOME/.local/bin:$HOME/bin:$PATH"

# NVM lazy load
_load_nvm() {
  unset -f nvm node npm npx _load_nvm
  [ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"
  "$@"
}
for cmd in nvm node npm npx; do
  eval "$cmd() { _load_nvm $cmd \"\$@\"; }"
done

# venv auto-activate if present
[ -d venv ] && source venv/bin/activate

# Aliases
alias c="clear&&clear"
alias e="exit 0"
alias q=e
alias vim=nvim
alias cat=bat
alias python=python3
alias av="source venv/bin/activate && echo '\nUsing $(which python). Enjoy!\n'"
alias cv="python3 -m venv venv && av && pip install --upgrade pip"
alias st="shelltime"
alias allow="sudo xattr -d com.apple.quarantine"

# Functions
kp() { kill -9 $(lsof -ti :$1) }

if [[ $COLUMNS -ge 80 ]]; then
    eval "$(oh-my-posh init zsh --config ~/Dev/configs/mac/.bread.omp.json)"    # Theme init
    ~/Dev/configs/mac/welcome   # Welcome message
fi

# The next line updates PATH for the Google Cloud SDK.
if [ -f "$HOME/Downloads/google-cloud-sdk/path.zsh.inc" ]; then . "$HOME/Downloads/google-cloud-sdk/path.zsh.inc"; fi

# The next line enables shell command completion for gcloud.
if [ -f "$HOME/Downloads/google-cloud-sdk/completion.zsh.inc" ]; then . "$HOME/Downloads/google-cloud-sdk/completion.zsh.inc"; fi


# bun completions
[ -s "$BUN_INSTALL/_bun" ] && source "$BUN_INSTALL/_bun"

